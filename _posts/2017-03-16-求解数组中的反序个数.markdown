---
layout: post
title: "æ±‚è§£æ•°ç»„ä¸­çš„ååºä¸ªæ•°"
author: '#1121'
date: 2017-03-16 22:57:53 +0800
categories: [åˆ†æ²»æ³•]
---

æ€’æ°´ä¸€å‘ï¼Œæ¥è‡ªç®—æ³•è¯¾çš„ä½œä¸šã€‚

å¯¹äºæ•°ç»„A[1:n]ï¼Œå¦‚æœi<jå¹¶ä¸”A[i]>A[j]ï¼Œåˆ™ç§°æ•°å¯¹(A[i],A[j])æ˜¯è¯¥æ•°ç»„çš„ä¸€ä¸ªååºã€‚ååºçš„ä¸ªæ•°å¯ä»¥ç”¨æ¥è¡¡é‡ä¸€ä¸ªæ•°ç»„çš„æ— åºç¨‹åº¦ã€‚

ä¾‹å¦‚ï¼ŒA=[3,5,2,4]ï¼Œåˆ™è¯¥æ•°ç»„ä¸­å­˜åœ¨3ä¸ªååº(3,2)ï¼Œ(5,2)ï¼Œ(5,4)ã€‚ä½œä¸šçš„å†…å®¹å°±æ˜¯è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸¥æ ¼ä½äºnÂ²çš„åˆ†æ²»ç®—æ³•æ¥æ±‚è§£æ•°ç»„ä¸­ååºçš„ä¸ªæ•°ã€‚

## æ€è·¯

ç”±äºè¦è®¾è®¡çš„æ˜¯åˆ†æ²»ç®—æ³•ï¼Œè‚¯å®šæ˜¯è¦å°†é—®é¢˜åˆ†è§£ä¸ºå­é—®é¢˜å¹¶é€’å½’æ±‚è§£ï¼Œåˆ†è§£åˆ°ä½•æ—¶å‘¢ï¼Ÿæ˜¾ç„¶ï¼Œå½“é—®é¢˜çš„è§„æ¨¡ä¸º1æ—¶ååºçš„ä¸ªæ•°ä¸º0ï¼Œå½“é—®é¢˜çš„è§„æ¨¡ä¸º2æ—¶ï¼Œè‹¥ç¬¬ä¸€ä¸ªå…ƒç´ å¤§äºç¬¬äºŒä¸ªå…ƒç´ åˆ™ååºä¸ªæ•°ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚åœ¨è¿™é‡Œå°†æ•°ç»„ç­‰åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå¯¹å·¦å³ä¸¤ä¸ªå­æ•°ç»„é€’å½’æ±‚è§£ã€‚æ—¶é—´å¤æ‚åº¦ä¸¥æ ¼ä½äºnÂ²ï¼Œä¸»è¦è€ƒé‡çš„æ˜¯mergeé˜¶æ®µï¼Œæˆ‘ä»¬å·²ç»åˆ†åˆ«æ±‚å‡ºäº†ä¸¤ä¸ªå­æ•°ç»„ä¸­çš„ååºä¸ªæ•°ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥è¦æ±‚çš„ä¾¿æ˜¯ä¸¤ä¸ªå­æ•°ç»„ä¸­å„æœ‰ä¸€ä¸ªå…ƒç´ çš„ååºçš„ä¸ªæ•°ï¼Œå°†å·¦å³ä¸¤ä¸ªå­æ•°ç»„åˆ†åˆ«æŒ‰å‡åºæ’åºï¼Œå„å–å·¦å³ä¸¤ä¸ªæ•°ç»„ä¸­çš„ä¸€ä¸ªæ•°aå’Œbè¿›è¡Œæ¯”è¾ƒï¼Œè‹¥a>bï¼Œé‚£ä¹ˆæ˜¾ç„¶(a,b)æ˜¯ä¸€ä¸ªååºï¼ŒåŒæ—¶å·¦è¾¹æ•°ç»„ä¸­aå³è¾¹çš„å…ƒç´ å‡å¤§äºaï¼Œå› æ­¤aå³è¾¹çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½ä¸bæ„æˆäº†ä¸€ä¸ªååºï¼Œè¿™æ ·æˆ‘ä»¬ä¾¿æ‰¾å‡ºäº†å¯¹åº”äºbçš„æ‰€æœ‰ååºï¼Œæ¥ç€å–å³è¾¹æ•°ç»„ä¸­bçš„ä¸‹ä¸€ä¸ªå…ƒç´ è¿›è¡Œä¸‹ä¸€è½®åˆ¤æ–­å³å¯ï¼›è‹¥a<bï¼Œé‚£ä¹ˆaä¹Ÿå°äºå³è¾¹æ•°ç»„ä¸­bå³è¾¹çš„æ‰€æœ‰å…ƒç´ ï¼Œå› æ­¤aä¸å¯èƒ½å†æ„æˆä»»ä½•ååºï¼Œæ¥ç€å–å·¦è¾¹æ•°ç»„ä¸­açš„ä¸‹ä¸€ä¸ªå…ƒç´ è¿›è¡Œä¸‹ä¸€è½®åˆ¤æ–­å³å¯ã€‚

## ä»£ç 

{% highlight bash linenos %}
def count_reverse(a, left, right):
    if left == right:
        return 0
    elif left == right - 1:
        return 1 if a[left] > a[right] else 0
    else:
        mid = (left + right) // 2

        count_left = count_reverse(a, left, mid)
        count_right = count_reverse(a, mid + 1, right)

        count_all = count_left + count_right

        sorted_left = sorted(a[left:mid + 1])
        sorted_right = sorted(a[mid + 1:right + 1])

        i = 0
        j = 0
        while i < len(sorted_left) and j < len(sorted_right):
            if sorted_left[i] > sorted_right[j]:
                count_all += (len(sorted_left) - i)
                j += 1
            else:
                i += 1
        return count_all
{% endhighlight %}

## æ—¶é—´å¤æ‚åº¦

mergeé˜¶æ®µåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œé¦–å…ˆæ˜¯å°†ä¸¤ä¸ªå­æ•°ç»„è¿›è¡Œæ’åºï¼Œè¿™éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦ä¸ºğš¶(nlogn)ï¼Œç„¶åæ˜¯å¯»æ‰¾ç”±ä¸¤ä¸ªå­æ•°ç»„çš„å…ƒç´ æ„æˆçš„ååºï¼Œè¿™éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦ä¸ºğš¶(n)ã€‚é‚£ä¹ˆï¼Œæ•´ä¸ªmergeé˜¶æ®µçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ğš¶(nlogn)

æœ€åå»ºç«‹çš„é€’å½’æ–¹ç¨‹ä¸ºï¼š

> T(n) = 2T(n/2) + nlogn

æ ¹æ®Masterå®šç†å¾ˆå®¹æ˜“å¯ä»¥æ±‚å‡ºè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºğš¹(nlogn)ï¼Œæ»¡è¶³æ—¶é—´å¤æ‚åº¦ä¸¥æ ¼ä½äºnÂ²çš„è¦æ±‚ã€‚